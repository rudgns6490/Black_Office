<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="archive">

	<!-- =========================	내가 쓴보고서 함	========================= -->
	<!--  검색조건이 없을경우 총 게시물 수 (totalCount)	 -->
	<select id="getReportTotalCountWithNoSearch" resultType="int">
		select count(*)
		from tbl_bo_report
		
	</select>
	
	<!--  검색조건이 있을경우 총 게시물 수 (totalCount)	 -->
	<select id="getReportTotalCountWithSearch" parameterType="HashMap" resultType="int">
		select count(*)
		from tbl_bo_report
		where  ${search_select} like '%' || #{report_search_word} || '%'
	</select>
	
	<!-- 페이징 한 내가 쓴 보고서 목록	 -->
	<select id="myWriteReportListWithPaging" parameterType="HashMap" resultType="com.bo.archive.model.ReportVO">
		select rno, reportno, fk_employeeno, reportday, reporttype, title, content, memo, addressee
		from
		(
		    select rownum AS rno, reportno, fk_employeeno, reportday, reporttype, title, content, memo, addressee
		    from
		    (
		        select reportno, fk_employeeno, reportday, reporttype, title, content, memo, addressee
		        from tbl_bo_report
<!-- 		        where fk_employeeno = #{employeeno} -->
				<if test='report_search_word != ""'>
					 where ${search_select} like '%' || #{report_search_word} || '%'
				</if>
				order by reportno desc
		    ) V
		) T
		where rno between #{startRno} and #{endRno}
		order by rno
	</select>
	<!-- =========================	내가 쓴보고서 함 끝	========================= -->
	
	
	
	





</mapper>




