<?xml version="1.0" encoding="UTF-8"?>

<!-- ==== #29. mapper 기본설정 ==== -->
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- ==== #29. 루트 엘리먼트 & 네임스페이스 설정(프로젝트 전체내에서 유일해야 한다.) ==== -->
<mapper namespace="admin"> 
	
	<insert id="register" parameterType="com.bo.member.model.MemberVO">
		insert into TBL_BO_EMPLOYEES(EMPLOYEENO, id, passwd, name, jubun, email, emailpw, phone, registerday, status, fk_positionno, fk_departmentno)
		values(SEQ_BO_EMPLOYEES.nextval, #{id}, #{passwd}, #{name}, #{jubun}, #{email}, #{emailpw}, #{phone}, default, 1, #{fk_positionno}, #{fk_departmentno})
	</insert>
	
	<!-- 로그인 처리 -->
	<select id="getLoginMember" parameterType="HashMap" resultType="com.bo.member.model.MemberVO">
		select employeeno, id, passwd, name, email, emailpw 
		from TBL_BO_EMPLOYEES 
		where status = 1 and 
		      id = #{id} and
		      passwd = #{passwd}
	</select>
	
	<select id="getPositionname" parameterType="int" resultType="String">
		select POSITIONNAME
		from TBL_BO_POSITION
		where POSITIONNO = #{fk_positionno}
	</select>
	
	<select id="getDepartmentname" parameterType="int" resultType="String">
		select DEPARTMENTNAME
		from TBL_BO_DEPARTMENT
		where DEPARTMENTNO = #{fk_departmentno}
	</select>
	
	<insert id="adressRegister" parameterType="com.bo.admin.model.AdressbookVO">
		insert into TBL_BO_ADDRESSBOOK_PERSONAL(ADDRNO, NAME, EMAIL, PHONE, POSITIONNAME, DEPARTMENTNAME, adressmode)
		values(SEQ_BO_ADDRESSBOOK_PERSONAL.nextval, #{name}, #{email}, #{phone}, #{positionname}, #{departmentname}, 2)
	</insert>
	
</mapper>


